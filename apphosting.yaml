# Settings to manage and configure a Firebase App Hosting backend.
# https://firebase.google.com/docs/app-hosting/configure

# The region of your App Hosting backend.
region: asia-east1
# An explicit ID for your backend.
backendId: classroom-maestro-backend

# Specifies the build and run settings for the backend.
runConfig:
  # Increase this value to automatically spin up more instances in response to
  # increased traffic.
  maxInstances: 1
  # The following environment variables are made available to your app
  # during the build process and at runtime.
  # These are based on the variables in your .env file.
  # NEXT_PUBLIC_ variables are required for Firebase to work on the client side.
  # For security, GOOGLE_API_KEY is handled separately as a secret.
  environmentVariables:
    NEXT_PUBLIC_FIREBASE_API_KEY: ${env.NEXT_PUBLIC_FIREBASE_API_KEY}
    NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN: ${env.NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN}
    NEXT_PUBLIC_FIREBASE_PROJECT_ID: ${env.NEXT_PUBLIC_FIREBASE_PROJECT_ID}
    NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET: ${env.NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET}
    NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID: ${env.NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID}
    NEXT_PUBLIC_FIREBASE_APP_ID: ${env.NEXT_PUBLIC_FIREBASE_APP_ID}

  # Specifies the secrets to be made available to your app at runtime.
  # The GOOGLE_API_KEY is necessary for the AI features (Genkit) to function.
  secrets: [GOOGLE_API_KEY]

# Controls who can access your backend.
ingressControls:
  allowPublic: true

# Specifies the CPU and memory for your App Hosting backend.
# 1 CPU is suitable for many general-purpose applications.
cpu: 1
